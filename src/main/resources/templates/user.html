<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8">
  <title>My Page</title>
</head>
<body>
<h1>my page</h1>
<p>Email: <span th:text="${email}"></span></p>
<p>Nickname: <span th:text="${nickname}"></span></p>
<a href="/">Home</a> | <a href="/logout">Logout</a>

<button id="unlinkBtn">계정 연결 해제</button>

<script>
  document.getElementById("unlinkBtn").addEventListener("click", async () => {
      const res = await fetch("/unlink", { method: "DELETE", credentials: "include" });
      if(res.ok) {
          alert("계정 연결이 해제되었습니다.");
          window.location.href = "/";
      } else {
          alert("연결 해제 실패");
      }
  });
</script>

</body>
</html>
